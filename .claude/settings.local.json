{
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(cat:*)",
      "mcp__postgres__query",
      "Bash(grep:*)",
      "Bash(find:*)",
      "Bash(.claude/hooks/run-silent.sh:*)",
      "Bash(/Users/jonasstenberg/Development/Private/recept/.claude/hooks/run-silent.sh:*)",
      "Bash(wc:*)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "postgres"
  ],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/wrap-pnpm.sh\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/run-silent.sh\" \"Lint\" \"pnpm lint\""
          },
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/run-silent.sh\" \"Tests\" \"pnpm test --run\""
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/analyze-for-tests.sh\""
          },
          {
            "type": "prompt",
            "prompt": "You are evaluating whether tests should be written for code changes. The output above shows files changed and key logic additions.\n\nIf the output shows NO_CODE_CHANGES or is empty, respond:\n{\"decision\": \"approve\", \"reason\": \"No code changes to test\"}\n\nAnalyze if tests would bring VALUE. Tests are valuable when:\n- New utility functions with logic (parsing, transformations, calculations)\n- Complex business logic or algorithms\n- Edge cases that are easy to get wrong\n- Code that will be reused across the codebase\n\nTests are NOT valuable for:\n- Simple React components (UI rendering, styling)\n- Thin wrappers or pass-through functions\n- Configuration or constants\n- Code that's mostly type definitions\n- Already trivial code\n- When existing tests already cover the logic\n\nProject test patterns:\n- Frontend: lib/**/__tests__/*.test.ts (vitest)\n- Email service: src/__tests__/*.test.ts (vitest)\n\nIf only config/style changes, respond:\n{\"decision\": \"approve\", \"reason\": \"No valuable tests needed\"}\n\nIf valuable tests should be written, respond:\n{\"decision\": \"block\", \"reason\": \"Tests should be written for [specific functions]. Use Task tool with subagent_type='react-frontend-dev' to write vitest tests.\"}\n\nBe selective - only block if tests genuinely add value. Most UI changes don't need tests.",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
