---
phase: 03-integration-visual-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/frontend/app/(main)/installningar/page.tsx
  - apps/frontend/app/(main)/installningar/sakerhet/page.tsx
  - apps/frontend/app/(main)/installningar/api-nycklar/page.tsx
  - apps/frontend/app/(main)/installningar/konto/page.tsx
  - apps/frontend/components/profile-form.tsx
  - apps/frontend/components/security-form.tsx
  - apps/frontend/components/api-key-manager.tsx
  - apps/frontend/components/account-deletion-form.tsx
autonomous: true

must_haves:
  truths:
    - "Settings pages do NOT have redundant h2 headings that duplicate the sidebar active state"
    - "All settings form components use Card/CardHeader/CardContent structure (not raw div with bg-card border)"
    - "Card padding is consistent: p-4 on mobile, p-6 on desktop (md:p-6)"
    - "Typography hierarchy is clean: layout h1, card CardTitle (no duplicate h2 page titles)"
  artifacts:
    - path: "apps/frontend/app/(main)/installningar/page.tsx"
      provides: "Profile page without redundant h2"
    - path: "apps/frontend/components/profile-form.tsx"
      provides: "Profile form using Card component"
    - path: "apps/frontend/components/security-form.tsx"
      provides: "Security form using Card component"
    - path: "apps/frontend/components/api-key-manager.tsx"
      provides: "API key manager using Card component"
  key_links:
    - from: "installningar/page.tsx"
      to: "profile-form.tsx"
      via: "direct import, no h2 wrapper"
    - from: "profile-form.tsx"
      to: "Card component"
      via: "uses Card/CardHeader/CardContent instead of raw div"
---

<objective>
Unify visual styling across all settings pages by removing redundant headings and standardizing card components.

Purpose: The user specifically noted "Currently on the settings page we have the h2 showing 'Profile' and within the card we have another h2 showing 'Profile', this is semantically wrong and leads to repetitiveness." This plan fixes that across all settings pages and ensures consistent Card component usage.

Output: All four settings pages use clean typography hierarchy (layout h1 only, no page-level h2) and consistent Card component structure with responsive padding.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Key files:
@apps/frontend/app/(main)/installningar/layout.tsx — Has the h1 "Installningar"
@apps/frontend/app/(main)/installningar/page.tsx — Has redundant h2 "Profil"
@apps/frontend/app/(main)/installningar/sakerhet/page.tsx — Has redundant h2 "Sakerhet"
@apps/frontend/app/(main)/installningar/api-nycklar/page.tsx — Has redundant h2 "API-nycklar"
@apps/frontend/app/(main)/installningar/konto/page.tsx — Has h2 "Konto" + description
@apps/frontend/components/profile-form.tsx — Uses raw div.bg-card, has internal h2 "Profil"
@apps/frontend/components/security-form.tsx — Uses raw div.bg-card, has internal h2 "Losenord"
@apps/frontend/components/api-key-manager.tsx — Uses raw div.bg-card, has internal h2 "API-nycklar"
@apps/frontend/components/account-deletion-form.tsx — Uses raw div.bg-card, has internal h3
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove redundant h2 headings from settings page files</name>
  <files>
    apps/frontend/app/(main)/installningar/page.tsx
    apps/frontend/app/(main)/installningar/sakerhet/page.tsx
    apps/frontend/app/(main)/installningar/api-nycklar/page.tsx
    apps/frontend/app/(main)/installningar/konto/page.tsx
  </files>
  <action>
Remove the redundant h2 headings from each settings sub-page. The sidebar active state and card titles already provide sufficient context for which section the user is viewing.

**installningar/page.tsx (Profil):**
- Remove the `<h2 className="text-2xl font-semibold mb-6">Profil</h2>` line
- Keep the wrapping div with space-y-6 (or simplify if only one child)
- Just render `<ProfileForm />` directly

**installningar/sakerhet/page.tsx (Sakerhet):**
- Remove `<h2 className="text-2xl font-semibold mb-6">Sakerhet</h2>`
- Just render `<SecurityForm />`

**installningar/api-nycklar/page.tsx (API-nycklar):**
- Remove `<h2 className="text-2xl font-semibold mb-6">API-nycklar</h2>`
- Just render `<ApiKeyManager initialKeys={apiKeys} />`

**installningar/konto/page.tsx (Konto):**
- Remove the h2 "Konto" and the description paragraph — the layout h1 "Installningar", the sidebar "Konto" active state, and the card's own title "Radera konto" provide sufficient context
- Just render `<AccountDeletionForm />`

The page files should become minimal wrappers that only handle data fetching (if needed) and render the form component.
  </action>
  <verify>
- `pnpm build` succeeds
- No duplicate heading text visible on any settings page
- Each settings page renders its form component directly
  </verify>
  <done>
All four settings pages have no redundant h2 headings. Typography hierarchy is: layout h1 "Installningar" -> Card titles inside components.
  </done>
</task>

<task type="auto">
  <name>Task 2: Standardize form components to use Card structure with responsive padding</name>
  <files>
    apps/frontend/components/profile-form.tsx
    apps/frontend/components/security-form.tsx
    apps/frontend/components/api-key-manager.tsx
    apps/frontend/components/account-deletion-form.tsx
  </files>
  <action>
Convert all settings form components from raw `div.bg-card.border.border-border.rounded-lg.p-6` to proper Card/CardHeader/CardContent structure. This creates visual consistency with the Hemmet sub-pages (which already use Card components).

**profile-form.tsx:**
- Replace `<div className="bg-card border border-border rounded-lg p-6">` with `<Card>`
- Extract the h2 "Profil" into `<CardHeader><CardTitle>Profil</CardTitle><CardDescription>Uppdatera ditt namn</CardDescription></CardHeader>`
- Wrap form in `<CardContent>`
- Remove the old h2 tag from inside the form
- Import Card, CardHeader, CardTitle, CardDescription, CardContent from `@/components/ui/card`

**security-form.tsx:**
- Replace `<div className="bg-card border border-border rounded-lg p-6">` with `<Card>`
- Extract h2 "Losenord" into `<CardHeader><CardTitle>Losenord</CardTitle><CardDescription>Byt ditt losenord</CardDescription></CardHeader>`
- Wrap form in `<CardContent>`
- Import Card components

**api-key-manager.tsx:**
- Replace outer `<div className="bg-card border border-border rounded-lg p-6">` with `<Card>`
- The existing internal structure already has a header-like section with h2 and description. Restructure to use `<CardHeader>` with the title/description/create button, and `<CardContent>` for the key list.
- Move the "Skapa ny nyckel" button into CardHeader's right side using a flex layout: `<CardHeader className="flex-row items-start justify-between space-y-0">`
- Import Card components

**account-deletion-form.tsx:**
- Replace `<div className="bg-card border border-destructive/50 rounded-lg p-6">` with `<Card className="border-destructive/50">`
- Extract h3 into `<CardHeader><CardTitle className="text-destructive">Radera konto</CardTitle></CardHeader>`
- Wrap content in `<CardContent>`
- Import Card components

For ALL components, do NOT change any functional logic, event handlers, or state management. Only restructure the JSX wrapper elements.

Responsive padding: The Card component already handles padding via CardHeader (p-6) and CardContent (p-6 pt-0) classes. This is the standard and should not be overridden. The responsive mobile reduction (p-4 on mobile) can be achieved by adding responsive classes to the Card's inner elements if needed, but start with the standard Card padding and only adjust if the visual review (checkpoint plan) identifies issues.
  </action>
  <verify>
- `pnpm build` succeeds
- All four form components render with Card borders and proper header/content sections
- No visual regressions in form functionality (submit, validation, error display)
- Profile form: name editing works
- Security form: password change works
- API key manager: create/revoke keys works
- Account deletion: dialog flow works
  </verify>
  <done>
All settings form components use standardized Card/CardHeader/CardContent structure. Visual rhythm is consistent across settings and Hemmet pages.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` passes
2. No h2 headings visible on settings pages (only layout h1 and card titles)
3. All form components render with Card wrapper (border, rounded, proper header/content)
4. Profile editing works (name save)
5. Password change works
6. API key create/revoke works
7. Account deletion dialog works
</verification>

<success_criteria>
- Zero redundant headings on settings pages
- All form components use Card structure
- All existing functionality preserved with no regressions
</success_criteria>

<output>
After completion, create `.planning/phases/03-integration-visual-polish/03-02-SUMMARY.md`
</output>
