# PostgREST Configuration
# See: https://postgrest.org/en/stable/references/configuration.html

# Database connection
db-uri              = "postgres://matrummet@localhost:5432/matrummet"
db-schema           = "public"
db-anon-role        = "anon"

# JWT authentication
# SECURITY: Use environment variable PGRST_JWT_SECRET in production
jwt-secret          = "matrummet-jwt-secret-change-in-production-min-32-chars"
role-claim-key      = ".role"

# Server settings
server-port         = 4444

# Pre-request hook for API key validation
db-pre-request      = "pre_request"

# Extension functions search path
db-extra-search-path = "extensions"

# OpenAPI settings
# SECURITY: "follow-privileges" only shows endpoints the role can actually access
# This hides internal tables (flyway_schema_history, rate_limit_attempts, etc.)
openapi-mode        = "follow-privileges"
openapi-server-proxy-uri = "https://api.matrummet.se"

# Security hardening (uncomment in production)
# db-max-rows         = 1000
# db-pool             = 10
# db-pool-acquisition-timeout = 10
